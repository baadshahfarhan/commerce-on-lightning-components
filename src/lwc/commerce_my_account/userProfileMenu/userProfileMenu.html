<template lwc:render-mode="light">
    <div
        if:true={isLoggedIn}
        class={menuContainerClasses}
        onkeydown={handleKeyDownOnMenu}
        onfocusout={handleFocusOutOnMenu}
        tabindex="-1"
    >
        <button
            class="slds-button slds-no-space slds-m-bottom_xx-small menu-button"
            onclick={handleMenuTriggerClick}
            aria-haspopup="true"
            aria-label={userProfileMenuButtonAltText}
        >
            <div class={menuTriggerContainerClasses}>
                <div
                    if:true={showNameInTrigger}
                    class="slds-media__body slds-show_large menu-trigger"
                >
                    <p class={menuTriggerUserNameClasses}>
                        {userName}
                    </p>
                    <p
                        if:true={includeCompanyName}
                        class="menu-trigger-p slds-text-align_right slds-truncate slds-text-title_bold"
                    >
                        {companyName}
                    </p>
                </div>
                <div>
                    <lightning-icon
                        icon-name={fetchUserOrCompanyIcon}
                        alternative-text={userProfileMenuButtonAltText}
                        size="small"
                        class="icon-color"
                    >
                    </lightning-icon>
                    <lightning-icon
                        icon-name="utility:chevrondown"
                        size="xx-small"
                        class="icon-color"
                    >
                    </lightning-icon>
                </div>
            </div>
        </button>

        <div
            if:true={hasMenuItems}
            class={menuDropDownContainerClasses}
            style={spaceFromTopStyleString}
        >
            <span
                class="menu-nubbin"
                aria-hidden="true"
                style={nubbinStyleString}>
            </span>
            <ul class='slds-dropdown__list user-profile-menu-list menu_ul slds-scrollable_y' role="menu">
                <template for:each={styleUserDetailsForMobileAndTablet} for:item="item" if:true={showNameInTrigger}>
                    <li key={item.id} class="slds-dropdown__item slds-hide_large company-name">
                        <p class={item.classes}>
                            <span class="slds-truncate" title={item.label}>{item.label}</span>
                        </p>
                    </li>
                </template>
                <template for:each={styleMappedMenuItems} for:item="item">
                    <li key={item.id} class="slds-dropdown__item">
                        <a
                            class={item.classes}
                            onclick={handleMenuItemClick}
                            onmouseenter={handleFocusOrHoverOnMenuItem}
                            onmouseleave={handleBlurOrOutOnMenuItem}
                            role="menuitem"
                            tabindex="-1"
                            data-id={item.id}>
                            <span class="slds-truncate" title={item.label}>{item.label}</span>
                        </a>
                    </li>
                </template>
            </ul>
        </div>
    </div>
    <a if:false={isLoggedIn} onclick={handleLoginButtonClick} class="login-link" style={cssCustomStyleForLoginLink}>
        <div class={loginLinkClasses}>
            <p
                class="slds-truncate login-text"
                style={loginLinkStyle}
            >
                {loginButtonText}
            </p>
            <lightning-icon
                icon-name="utility:user"
                size="small"
                class="icon-color"
            >
            </lightning-icon>
        </div>
    </a>
</template>