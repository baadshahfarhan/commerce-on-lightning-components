<template lwc:render-mode="light">
    <template if:true={_errorMessage}>
        <b2c_lite_commerce-scoped-notification
            type="error"
            message-body={_errorMessage}
            dismissible="true"
            ondismissnotification={handleDismissNotification}
        ></b2c_lite_commerce-scoped-notification>
    </template>
    <template if:true={showAddressForm}>
        <div class="slds-form-element slds-p-around_medium">
            <h2 if:true={showComponentHeader} class="address-header">
                <span if:true={isNewAddressMode}>{componentHeaderNewAddressLabel}</span>
                <span if:false={isNewAddressMode}>{componentHeaderEditAddressLabel}</span>
            </h2>
            <div class="address-form-align" style={formStyle}>
                <lightning-combobox if:true={showDifferentAddressTypes}
                    class="address-type"
                    data-validate
                    data-address-type-field
                    name="addressType"
                    value={addressType}
                    label={labels.addressTypeLabel}
                    placeholder={labels.addressTypePlaceHolderLabel}
                    options={addressTypeOptions}
                    onchange={handleAddressTypeChange}
                    required
                ></lightning-combobox>
                <div class="slds-form-element__row name-fields">
                    <lightning-input
                        if:true={isLastNameFirst}
                        data-lastname-field
                        data-validate
                        class="slds-size_1-of-2 name-field"
                        label={labels.lastNameLabel}
                        name="lastname"
                        autocomplete="family-name"
                        oncommit={handleLastNameChange}
                        required
                        maxlength="255"
                        value={lastName}
                    ></lightning-input>
                    <lightning-input
                        data-firstname-field
                        data-validate
                        class="slds-size_1-of-2 name-field"
                        label={labels.firstNameLabel}
                        name="firstname"
                        autocomplete="given-name"
                        oncommit={handleFirstNameChange}
                        required
                        maxlength="255"
                        value={firstName}
                    ></lightning-input>
                    <lightning-input
                        if:false={isLastNameFirst}
                        data-lastname-field
                        data-validate
                        class="slds-size_1-of-2 name-field"
                        label={labels.lastNameLabel}
                        name="lastname"
                        autocomplete="family-name"
                        oncommit={handleLastNameChange}
                        required
                        maxlength="255"
                        value={lastName}
                    ></lightning-input>
                </div>
                <lightning-input-address
                    required
                    data-validate
                    data-address-fields
                    onchange={handleAddressChange}
                    country={normalizedCountry}
                    country-label={labels.countryLabel}
                    country-options={countryOptions}
                    city={city}
                    city-label={labels.cityLabel}
                    postal-code={postalCode}
                    postal-code-label={labels.postalCodeLabel}
                    province={province}
                    province-label={labels.provinceLabel}
                    province-options={provinceOptions}
                    street={street}
                    street-label={labels.streetLabel}
                    variant="label-hidden"
                    locale={customLocale}
                ></lightning-input-address>
                <lightning-input
                    data-default-address-checkbox
                    label={makeDefaultAddressLabel}
                    type="checkbox"
                    onchange={handleIsDefaultAddressChange}
                    checked={isDefaultAddress}
                ></lightning-input>
                <slot name="actionButtons"></slot>
            </div>
        </div>
    </template>
    <lightning-spinner if:true={_showPageSpinner} alternative-text={labels.saveLabel} size="large"></lightning-spinner>
</template>
