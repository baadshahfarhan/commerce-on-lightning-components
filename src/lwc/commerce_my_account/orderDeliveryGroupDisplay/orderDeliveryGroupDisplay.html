<template lwc:render-mode="light">
    <template if:true={_hasOrderDeliveryGroup}>
    <commerce-error
        if:true={_hasError}
        error-label={orderDeliveryGroup.orderItemsErrorMessage}
        class="slds-grid slds-p-bottom_x-small"
    ></commerce-error>
    <div
        if:true={_showShippingFields}
        class="field-properties slds-border_bottom slds-grid slds-wrap slds-p-bottom_x-small slds-p-left_large"
    >
        <!-- Display the shipping fields -->
        <template for:each={_transformedShippingFields} for:item="field">
            <div key={field.id} class="shipping-field-item slds-grid slds-m-bottom_xx-small slds-wrap">
                <span if:true={field.hasFieldName}>
                    <span class="slds-truncate_container_75">{field.label}</span>
                    <lightning-formatted-rich-text
                        value={_labels.keyValueSeparatorWithSpace}
                        aria-hidden="true"
                    ></lightning-formatted-rich-text>
                </span>
                <span>
                    <commerce-field-display
                        currency-code={currencyCode}
                        type={field.type}
                        value={field.text}
                    ></commerce-field-display>
                </span>
            </div>
        </template>
    </div>

    <!-- go over the order items -->
    <ul if:true={_hasItems}>
        <template for:each={_orderItems} for:item="item">
            <li
                class="slds-p-vertical_small slds-border_bottom"
                key={item.productId}
                tabindex="-1"
                item-id={item.productId}
            >
                <commerce_my_account-order-item-info
                    currency-code={currencyCode}
                    order-item={item}
                    product-unavailable-message={productUnavailableMessage}
                    show-image={showProductImage}
                    show-total={showTotal}
                    total-price-text-color={totalPriceTextColor}
                    text-display-info={textDisplayInfo}                    
                ></commerce_my_account-order-item-info>
            </li>
        </template>
    </ul>

    <!-- loading spinner -->
    <lightning-spinner
        if:true={_isItemListIndeterminate}
        class="slds-is-relative slds-align_absolute-center slds-m-around_large"
        variant="brand"
        alternative-text={_labels.spinnerText}
    ></lightning-spinner>

    <!-- show more button when there are more items available -->
    <footer if:true={orderDeliveryGroup.orderItemsHasNextPage} class="slds-p-around_small slds-align_absolute-center">
        <lightning-button variant="Neutral" label={showMoreProductLabel} onclick={handleShowMoreItems} class="show-more">
            <span class="slds-assistive-text">{showMoreProductLabel}</span>
        </lightning-button>
    </footer>
</template>
</template>