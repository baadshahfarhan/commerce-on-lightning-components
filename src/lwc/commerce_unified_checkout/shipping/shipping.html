<template lwc:render-mode="light">
    <div name="shipping-address" data-shipping-edit="">

        <!-- ------------------------------------------------- -->
        <!-- The list of existing authenticated user addresses -->
        <!-- ------------------------------------------------- -->
        <template if:true={showAddressList}>
            <div class="slds-p-bottom_small">
                <commerce_unified_checkout-address-visual-picker
                    data-shipping-radio-group
                    disabled={isDisabled}
                    options={_addresses}
                    name="shippingAddresses"
                    value={_initValue}
                    edit-address-label={editAddressLabel}
                    disable-edit={_existingAddressesOnly}
                    onchangeaddressoption={handleAddressOptionChange}
                    oneditaddress={handleEditAddress}
                >
                </commerce_unified_checkout-address-visual-picker>
            </div>
        </template>

        <template if:true={showButtons}>
            <div class="buttons-flex buttons">
                <!-- Show more existing addresses in list above -->
                <template if:true={showShowMoreAddressesButton}>
                    <button
                    class="slds-button slds-button_neutral"
                    data-show-more-addresses
                    disabled={isDisabled}
                    onclick={handleShowMoreAddressesClicked}
                    type="button"
                    role="button"
                    >
                    {showMoreButtonLabel}
                    </button>
                </template>

                <!-- Create a new address button -->
                <template if:true={showNewAddressButton}>
                <button
                    class="slds-button slds-button_neutral"
                    data-add-new-address
                    data-automation={newAddressButtonLabel}
                    disabled={isDisabled}
                    onclick={handleNewAddressButtonClicked}
                    type="button"
                    role="button"
                    >{newAddressButtonLabel}
                </button>
                </template>
            </div>
        </template>

        <!-- ---------------------------------------------------- -->
        <!-- New address form with first, last, phone and address -->
        <!-- ---------------------------------------------------- -->
        <template if:true={showNewAddressForm}>
            <div class="slds-p-top_small slds-p-bottom_small">
                <commerce_unified_checkout-input-address
                    data-shipping-input-address
                    disabled={isDisabled}
                    show-form-border-style={showBackToListLink}
                    show-back-to-list-link={showBackToListLink}
                    back-to-list-label={backToListLabel}
                    component-header-edit-address-label={componentHeaderEditAddressLabel}
                    show-phone-number={isGuestUser}
                    show-person-name={_showPersonName}
                    show-default-address={isAuthenticatedUser}
                    readonly-default-address={_readonlyDefaultAddress}
                    make-default-address-label={makeDefaultAddressLabel}
                    address={address}
                    contact-info={contactInfo}
                    onaddresschanged={handleInputAddressChange}
                    onclosenewaddressformclick={handleCloseNewAddressFormClicked}
                    phone-number-label={phoneNumberLabel}
                    phone-number-placeholder-text={phoneNumberPlaceholderText}
                ></commerce_unified_checkout-input-address>
            </div>
        </template>
    </div>

    <!-- ---------------------------------------------------- -->
    <!-- The error message banner                             -->
    <!-- ---------------------------------------------------- -->
    <b2c_lite_commerce-scoped-notification
        type="error"
        message-header={_errorLabels.header}
        message-body={_errorLabels.body}
        dismissible={_dismissible}
    ></b2c_lite_commerce-scoped-notification>
</template>
